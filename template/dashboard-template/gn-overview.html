<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ResQnet - Grama Niladari Dashboard</title>
    <link rel="stylesheet" href="./styles/core.css" />
    <link rel="stylesheet" href="./styles/dashboard.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <style>
      /* GN Dashboard specific styles */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.25rem;
        margin-bottom: 2.5rem;
      }
      .stat-card {
        background: #fff;
        border: 1px solid var(--color-border);
        border-radius: var(--radius-lg);
        padding: 1.5rem 1.25rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
      .stat-label {
        font-size: 0.8rem;
        color: #555;
        font-weight: 500;
      }
      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--color-text);
      }

      /* Safe Locations Section */
      .safe-locations-section {
        background: #fff;
        border: 1px solid var(--color-border);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 2.5rem;
      }
      .safe-locations-section h2 {
        margin: 0 0 1.25rem;
        font-size: 1.15rem;
        font-weight: 600;
      }
      .locations-container {
        display: grid;
        grid-template-columns: 1fr 1.2fr;
        gap: 1.5rem;
      }
      .locations-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .update-btn {
        all: unset;
        cursor: pointer;
        background: var(--color-accent);
        color: #000;
        font-weight: 600;
        font-size: 0.85rem;
        padding: 0.7rem 1.5rem;
        border-radius: 999px;
        text-align: center;
        margin-bottom: 1rem;
        transition: background-color var(--transition);
        display: block;
      }
      .update-btn:hover {
        background: var(--color-accent-hover);
      }
      .location-item {
        background: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-md);
        padding: 0.9rem 1rem;
      }
      .location-name {
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 0.3rem;
      }
      .location-coords {
        font-size: 0.75rem;
        color: #666;
      }
      .map-container {
        background: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-md);
        min-height: 350px;
        overflow: hidden;
        position: relative;
      }
      .map-container iframe {
        width: 100%;
        height: 100%;
        border: 0;
        display: block;
      }

      /* Disaster Reports Table */
      .reports-section {
        background: #fff;
        border: 1px solid var(--color-border);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
      }
      .reports-section h2 {
        margin: 0 0 1.25rem;
        font-size: 1.15rem;
        font-weight: 600;
      }
      .reports-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.85rem;
      }
      .reports-table thead {
        background: var(--color-surface);
      }
      .reports-table th {
        text-align: left;
        padding: 0.85rem 1rem;
        font-weight: 600;
        font-size: 0.8rem;
        color: #555;
        border-bottom: 1px solid var(--color-border);
      }
      .reports-table td {
        padding: 1rem;
        border-bottom: 1px solid var(--color-border);
      }
      .reports-table tbody tr:last-child td {
        border-bottom: none;
      }
      .reports-table tbody tr:hover {
        background: var(--color-surface);
      }
      .location-link {
        color: #4a90e2;
        text-decoration: none;
      }
      .location-link:hover {
        text-decoration: underline;
      }
      .severity-high {
        color: var(--color-accent-2);
        font-weight: 600;
      }
      .status-pending {
        color: #f59e0b;
        font-weight: 500;
      }

      @media (max-width: 768px) {
        .locations-container {
          grid-template-columns: 1fr;
        }
        .stats-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar" aria-label="Primary Navigation">
        <div class="brand">
          <img class="logo-img" src="./assets/img/logo.svg" alt="ResQnet Logo" width="120" height="32" />
          <span class="brand-name sr-only">ResQnet</span>
        </div>
        <nav class="nav">
          <button class="nav-item active" data-section="overview">
            <span class="icon" data-lucide="home"></span>
            <span>Overview</span>
          </button>
          <button class="nav-item" data-section="forecast">
            <span class="icon" data-lucide="line-chart"></span>
            <span>Forecast Dashboard</span>
          </button>
          <button class="nav-item" data-section="donation-requests">
            <span class="icon" data-lucide="gift"></span>
            <span>Donation Requests</span>
          </button>
          <button class="nav-item" data-section="disaster-reports">
            <span class="icon" data-lucide="alert-triangle"></span>
            <span>Disaster Reports</span>
          </button>
          <button class="nav-item" data-section="safe-locations">
            <span class="icon" data-lucide="map-pin"></span>
            <span>Safe Locations</span>
          </button>
          <button class="nav-item" data-section="forum">
            <span class="icon" data-lucide="message-circle"></span>
            <span>Forum</span>
          </button>
          <button class="nav-item" data-section="profile-settings">
            <span class="icon" data-lucide="user"></span>
            <span>Profile Settings</span>
          </button>
        </nav>
        <div class="sidebar-footer">
          <button class="logout" aria-label="Logout">↩ Logout</button>
        </div>
      </aside>

      <!-- Topbar -->
      <header class="topbar">
        <div class="breadcrumb">GN Dashboard / <span>Overview</span></div>
        <div class="topbar-right">
          <div class="hotline" role="button" tabindex="0" aria-label="Hotline 117">
            <span class="hotline-icon" data-lucide="phone"></span>
            Hotline: <strong>117</strong>
          </div>
          <div class="user-avatar" aria-label="User Menu" role="button">
            <img src="https://via.placeholder.com/40x40.png?text=GN" alt="User Avatar" />
          </div>
          <button class="menu-toggle" aria-label="Open Menu">
            <span data-lucide="menu"></span>
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <main class="content" id="mainContent" tabindex="-1">
        <section class="welcome">
          <h1>Grama Niladari Dashboard</h1>
        </section>

        <!-- Stats Cards -->
        <section class="stats-grid" aria-label="Dashboard Statistics">
          <div class="stat-card">
            <div class="stat-label">Pending Donation Requests</div>
            <div class="stat-value">12</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Safe Locations in Division</div>
            <div class="stat-value">45</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Disaster Reports</div>
            <div class="stat-value">8</div>
          </div>
        </section>

        <!-- Safe Locations Section -->
        <section class="safe-locations-section" aria-label="Safe Locations">
          <h2>Safe Locations</h2>
          <div class="locations-container">
            <div class="locations-list">
              <button class="update-btn">Update Details</button>
              
              <div class="location-item">
                <div class="location-name">Central Park</div>
                <div class="location-coords">40.7128° N, 74.0060° W</div>
              </div>
              
              <div class="location-item">
                <div class="location-name">Griffith Observatory</div>
                <div class="location-coords">34.1522° N, 118.2437° W</div>
              </div>
              
              <div class="location-item">
                <div class="location-name">Eifel Tower</div>
                <div class="location-coords">48.8566° N, 2.3522° E</div>
              </div>
              
              <div class="location-item">
                <div class="location-name">Golden Gate Park</div>
                <div class="location-coords">37.7749° N, 122.4194° W</div>
              </div>
            </div>
            
            <div class="map-container">
              <!-- Embedded Map - Replace with actual map API integration -->
              <iframe 
                src="https://www.openstreetmap.org/export/embed.html?bbox=-74.0170%2C40.7000%2C-73.9950%2C40.7250&layer=mapnik&marker=40.7128%2C-74.0060" 
                style="border: 0;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
          </div>
        </section>

        <!-- Disaster Reports Section -->
        <section class="reports-section" aria-label="Real-time Disaster Reports">
          <h2>Real-time Disaster Reports</h2>
          <table class="reports-table">
            <thead>
              <tr>
                <th>Report ID</th>
                <th>Location</th>
                <th>Type</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>#DR2024-001</td>
                <td><a href="#" class="location-link">Colombo</a></td>
                <td><span class="severity-high">High</span></td>
                <td><span class="status-pending">Pending</span></td>
              </tr>
              <tr>
                <td>#DR2024-001</td>
                <td><a href="#" class="location-link">Colombo</a></td>
                <td><span class="severity-high">High</span></td>
                <td><span class="status-pending">Pending</span></td>
              </tr>
              <tr>
                <td>#DR2024-001</td>
                <td><a href="#" class="location-link">Colombo</a></td>
                <td><span class="severity-high">High</span></td>
                <td><span class="status-pending">Pending</span></td>
              </tr>
            </tbody>
          </table>
        </section>
      </main>
    </div>

    <script>
      // Initialize Lucide icons
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }

      // Navigation functionality
      document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', function() {
          const section = this.getAttribute('data-section');
          
          // Remove active class from all items
          document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
          
          // Add active class to clicked item
          this.classList.add('active');
          
          // Navigate based on section
          switch(section) {
            case 'overview':
              window.location.href = 'gn-overview.html';
              break;
            case 'forecast':
              window.location.href = 'forecast-dashboard.html';
              break;
            case 'donation-requests':
              window.location.href = 'donation-requests-gn.html';
              break;
            case 'disaster-reports':
              window.location.href = 'disaster-reports.html';
              break;
            case 'safe-locations':
              window.location.href = 'safe-locations-gn.html';
              break;
            case 'forum':
              window.location.href = 'forum-moderation-v2.html';
              break;
            case 'profile-settings':
              window.location.href = 'profile-settings.html';
              break;
          }
        });
      });

      // Logout functionality
      document.querySelector('.logout').addEventListener('click', function() {
        if (confirm('Are you sure you want to logout?')) {
          window.location.href = 'login.html';
        }
      });

      // Update Details button
      document.querySelector('.update-btn').addEventListener('click', function() {
        window.location.href = 'update-safe-location-gn.html';
      });
    </script>
  </body>
</html>
